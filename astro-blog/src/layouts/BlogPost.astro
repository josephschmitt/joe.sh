---
import BaseLayout from './BaseLayout.astro';
import ArticleHeader from '@components/ArticleHeader.astro';
import Footer from '@components/Footer.astro';
import { getMonth, getDay, getYear } from '@utils/date';

interface Props {
  title: string;
  subtitle?: string;
  date: Date;
  heroImage?: string;
  theme?: string;
  code?: boolean;
}

const { title, subtitle, date, heroImage, theme, code } = Astro.props;

// Format date parts for timestamp
const month = getMonth(date);
const day = getDay(date);
const year = getYear(date);
---

<BaseLayout title={title} description={subtitle}>
  <ArticleHeader 
    title={title} 
    subtitle={subtitle} 
    heroImage={heroImage}
    theme={theme}
  />
  
  <section class="column content">
    <article>
      <a class="timestamp" href={`#${title}`}>
        <span class="month">{month}</span>
        <span class="day">{day}</span>
        <span class="year">{year}</span>
      </a>
      <slot />
    </article>
    
    <aside>
      <p>Questions or comments? <a href={`https://twitter.com/intent/tweet?screen_name=josephschmitt&text=Re%3A%20${encodeURIComponent(title)}`}>Ping me on Twitter</a></p>
    </aside>
  </section>
  
  <Footer />
</BaseLayout>

{code && <link rel="stylesheet" href="/assets/styles/themes/tomorrow.css">}
